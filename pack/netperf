#!/bin/bash

VERSION="2.7.0"
WEB_URL="https://github.com/HewlettPackard/netperf/archive/netperf-${VERSION}.tar.gz"

download()
{
	wget $WEB_URL
}

build()
{
	tar vxf netperf-${VERSION}.tar.gz
	cd netperf-netperf-${VERSION}

	local configure_flags=(
				--prefix=$BM_ROOT
				--enable-demo
				--enable-unixdomain
				--enable-sctp
				--enable-dccp
				--enable-burst
	)
	if [[ $distro == "centos" ]]; then
		CC=gcc ./configure "${configure_flags[@]}"
	else
		CC=gcc-4.9 ./configure "${configure_flags[@]}"
	fi
	make
}
